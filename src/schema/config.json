{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "http://ezbob.com/ui.config.schema.json",
  "title": "Configuration schema",
  "description": "JSON Schema document describing what are the possible values in UI configuration",
  "type": "object",
  "additionalProperties": true,
  "definitions": {
    "linkedAccount": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string"
        },
        "contentType": {
          "type": "string"
        },
        "linkedService": {
          "type": "string"
        },
        "accountType": {
          "type": "string"
        },
        "serviceName": {
          "type": "string"
        }
      }
    },
    "amazonAccountProp": {
      "type": "object",
      "properties": {
        "validationRules": {
          "type": "string"
        },
        "customErrorMessage": {
          "type": "object"
        }
      }
    }
  },
  "properties": {
    "system": {
      "description": "System settings",
      "type": "object",
      "properties": {
        "enableDeviceFraudCheck": {
          "description": "Turn on Iovation device fraud check",
          "type": "boolean"
        },
        "vendorName": {
          "description": "Vendor name (e.g. MetroBank)",
          "type": "string"
        },
        "uiVersion": {
          "description": "Deployed version of UI",
          "type": "string"
        },
        "inactiveLogout": {
          "description": "Defines after how many minutes to logout user",
          "type": "object",
          "required": ["minutes"],
          "properties": {
            "minutes": {
              "type": "number"
            }
          }
        },
        "checkFraud": {
          "description": "TODO",
          "type": "boolean"
        },
        "isProduction": {
          "description": "Is the app running in production mode",
          "type": "boolean"
        }
      }
    },
    "externalServices": {
      "description": "",
      "type": "object"
    },
    "locals": {
      "description": "",
      "type": "object"
    },
    "product": {
      "description": "",
      "type": "object"
    },
    "pageRoutes": {
      "description": "",
      "type": "object"
    },
    "modals": {
      "description": "",
      "type": "object"
    },
    "steps": {
      "description": "",
      "type": "object"
    },
    "theme": {
      "description": "",
      "type": "object"
    },
    "updateUserFields": {
      "description": "",
      "type": "object"
    },
    "widgetsConfig": {
      "description": "",
      "type": "object"
    },
    "officers": {
      "description": "",
      "type": "object"
    },
    "personsSignificantControl": {
      "description": "",
      "type": "object"
    },
    "meta": {
      "description": "",
      "type": "object"
    },
    "vatStatement": {
      "description": "",
      "type": "object"
    },
    "accountScoreStatement": {
      "description": "",
      "type": "object"
    },
    "bankAccountStatement": {
      "description": "",
      "type": "object"
    },
    "financialAccountsStatement": {
      "description": "",
      "type": "object"
    },
    "eCommerce": {
      "description": "",
      "type": "object"
    },
    "linkAccount": {
      "description": "Link external providers' account",
      "type": "object",
      "properties": {
        "paypal": {
          "$ref": "#/definitions/linkedAccount"
        },
        "ebay": { "$ref": "#/definitions/linkedAccount" },
        "amazon": {
          "allOf": [
            {
              "$ref": "#/definitions/linkedAccount"
            },
            {
              "properties": {
                "sellerId": { "$ref": "#/definitions/amazonAccountProp" },
                "marketplaceId": { "$ref": "#/definitions/amazonAccountProp" },
                "authorizationToken": {
                  "$ref": "#/definitions/amazonAccountProp"
                }
              }
            }
          ]
        }
      }
    },
    "decision": {
      "description": "Decision config",
      "type": "object",
      "properties": {
        "decisionPolicy": {
          "type": "string",
          "enum": ["legacy", "v2"]
        },
        "minimumRequirements": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "widgetName": {
                "type": "string"
              },
              "minimum": {
                "type": "number",
                "minimum": 0
              }
            }
          }
        },
        "minimumMarketPlaceItems": {
          "type": "number"
        },
        "waitTime": {
          "type": "object",
          "propertyNames": {
            "enum": [
              "years",
              "y",
              "months",
              "M",
              "weeks",
              "w",
              "days",
              "d",
              "hours",
              "h",
              "minutes",
              "m",
              "seconds",
              "s",
              "milliseconds",
              "ms"
            ]
          },
          "patternProperties": {
            "": {
              "type": "number"
            }
          }
        }
      }
    },
    "popupLoader": {
      "description": "Popup loader configuration",
      "type": "object",
      "properties": {
        "type": {
          "description": "Type of loader animation",
          "type": "string"
        }
      }
    },
    "languages": {
      "description": "Supported languages configuration",
      "type": "object",
      "properties": {
        "defaultLanguage": {
          "description": "Default app language",
          "type": "string"
        },
        "fallbackLanguage": {
          "description": "Fallback language",
          "type": "string"
        },
        "languageList": {
          "description": "List of supported languages",
          "type": "object",
          "patternProperties": {
            "[a-z]{2}": {
              "description": "Key is language 2 letter code, `en` for example",
              "type": "object",
              "required": ["translation"],
              "properties": {
                "translation": {
                  "description": "All translation strings used in the app. Dynamic object",
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "environments": {
      "description": "Various environment related configurations",
      "type": "object",
      "properties": {
        "appHost": {
          "type": "string"
        }
      }
    },
    "routing": {
      "description": "Define various routes to external sites",
      "type": "object",
      "required": ["systemUi"],
      "properties": {
        "logoutUrl": {
          "type": "string"
        },
        "systemUi": {
          "description": "This app's url",
          "type": "string"
        },
        "vendorWebsiteUrl": {
          "type": "string"
        }
      }
    },
    "fuzzyEnabled": {
      "description": "Is fuzzy logic enabled",
      "type": "boolean"
    },
    "ez1Up": {
      "description": "Is EZ1 up",
      "type": "boolean"
    },
    "caseMap": {
      "description": "Map structure to case field paths",
      "type": "object"
    }
  },
  "required": ["system"]
}
